---
layout: post
tags:
  - Redis
---

- [前言](#前言)
- [定义](#定义)
- [优劣](#优劣)
    - [双向链表](#双向链表)
    - [无环链表](#无环链表)
    - [带有头指针和尾指针](#带有头指针和尾指针)
    - [带有长度计数器](#带有长度计数器)
- [总结](#总结)
- [参考文章](#参考文章)
- [联系我](#联系我)

## 前言
Redis 已经是大家耳熟能详的东西了，日常工作也都在使用，面试中也是高频的会涉及到，那么我们对它究竟了解有多深刻呢？

我读了几本 Redis 相关的书籍，尝试去了解它的具体实现，将一些底层的数据结构及实现原理记录下来。

本文将介绍 Redis 中最基础的 **linkedlist(双端链表)** 的实现方法。它是 Redis 的列表键的底层实现之一。

如果你对链表的基础定义没有一些了解的话，建议先去简单学习一下。
## 定义

链表，是一个非常常用的数据结构，在很多编程语言里都有实现，比如 Java 中的 LinkedList. 但是 C 语言没有。而 Redis 又需要频繁的使用链表，所以 Redis 自己实现了一个双端链表。

链表节点的定义：

```c
typedef struct listNode{
  // 前置节点
  struct listNode *prev;
  // 后置节点
  struct listNode *next;
  // 节点的值
  void *value;
}listNode
```

通过这个节点，我们就可以构造出来一个链表了。

但是 Redis 为了更好的操作，封装了一个链表结构 **list**. 结构如下：

```c
typedef struct list {
  // 表头结点
  listNode *head;
  // 表尾节点
  listNode *tail;
  // 链表所包含的节点数量
  unsigned long len;
  // 其他函数
  ...
}list;
```

list 结构为链表提供了表头指针 head, 表尾指针 tail, 以及链表长度的计数器 len. 来方便的对链表进行一个双端的遍历，或者查看链表长度。

下图是一个 list 结构，其中包含了三个 listNode.

![2020-01-05-14-14-45](http://img.couplecoders.tech/2020-01-05-14-14-45.png)
 

## 优劣

### 双向链表

从 listNode 的结构我们可以看到，包含了前直接点和后置节点。所以可以很方便的进行正向和反向的遍历。

### 无环链表

表头结点的 prev 指针和表尾结点的 next 指针都只想 null, 所以 Redis 的链表是一个无环链表。

### 带有头指针和尾指针

在 list 结构中，保存了当前链表的表头指针和表尾指针，因此可以快速的从头进行遍历或者从尾部开始遍历。

### 带有长度计数器

list 结构中保存了当前链表长度的长度，因此对链表长度的统计时间复杂度是 O(1).

## 总结

链表是一个比较常用的数据结构，在很多编程语言中都有实现，读者们接触也很多。因此本文没有专门去强调它的实现方法，而是大概介绍了下 Redis 中的链表的一个结构及其主要特性：

1. Redis 的链表是双端链表。
2. 封装了 list 结构，保存了链表的头尾指针以及链表长度。
3. Redis 的链表是无环链表。

## 参考文章

《Redis 的设计与实现（第二版）》

<br>

完。
<br>

## 联系我
最后，欢迎关注我的个人公众号【 呼延十 】，会不定期更新很多后端工程师的学习笔记。
也欢迎直接公众号私信或者邮箱联系我，一定知无不言，言无不尽。
![](http://img.couplecoders.tech/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png)

<br>

**以上皆为个人所思所得，如有错误欢迎评论区指正。**

**欢迎转载，烦请署名并保留原文链接。**

**联系邮箱：huyanshi2580@gmail.com**

**更多学习笔记见个人博客或关注微信公众号 &lt; 呼延十 &gt;------><a href="{{ site.baseurl }}/">呼延十</a>**