---
layout: post
category: mysql
---


前一阵在写很多sql及类sql语句，发现自己的记忆力可以说是相当烂了，上午刚查过插入语句怎么写，下午就忘记了需要重新查，，而且隐隐约约的有点强迫症？？只要记得不是特别清晰，就需要去重新查，看，记一遍，十分浪费时间，因此在这里将自己用到的sql语句记下来，方便后续的查找！！  


PS:以个人习惯记录，切勿直接copy执行。文中命令/方法只是本人使用过的一些，不覆盖所有，例如：数据库导入导出还有其他多种方式，有兴趣可以自行研究。  
PSS:我发现我终于记住了，在写下面表格时基本没有去查了。。  
PSSS:  所有命令都手动实践过(不包含拼写错误)，因此可以放心使用。  

### 基础语句
功能| 语句| 备注|
---| ---| ---|
插入语句 | insert into 表(字段) values (值);|
查找语句 | select 字段 from 表 where 条件 order by 列 limit 数量 | order/limit非必须
删除语句 | delete from 表名 where 条件 |
修改语句 | update 表名 set 字段=值 where 条件 |
去重值 | select distinct 列名 from 表 where 条件 | 列名可以为多个，但同时作用于多个，使用需谨慎
模糊查找 like | select 列名 from 表 where 列 like ‘%嘻嘻%’；| 谨慎使用，有性能问题
模糊查找 contact | *省略前面* where 列 contact('%',#{name},''); | 用于mybatis

### 数据库导入与导出

#### 导出sql文件
* 导出数据库的结构及数据
```mysql
  mysqldump -u 数据库用户名 -p 数据库名>导出路径及文件名
  //example
  mysqldump -u huyanshi -p mydb>~/Desktop/mydb.sql
```
* 导出数据库中某张表结构及数据
```mysql
  mysqldump -u 数据库用户名 -p 数据库名 表名>导出路径及文件名
  //example
  mysqldump -u huyanshi -p mydb mytable>~/Desktop/mydb_mytable.sql
```
* 导出数据库全部表结构
```mysql
  mysqldump -u 数据库用户名 -p -d --add-drop-table 数据库名>导出路径及文件名
  //example
  mysqldump -u huyanshi -p -d --add-drop-table mydb >~/Desktop/mydb_st.sql
```
* 导出某张表的结构
```mysql
  mysqldump -u 数据库用户名 -p -d --add-drop-table 数据库名 表名>导出路径及文件名
  //example
  mysqldump -u huyanshi -p -d --add-drop-table mydb mytable >~/Desktop/mydb_mytable_st.sql
```

#### 导出excel
有时会有一些运营/hr/IT来找你让你导出一些简单的数据，这个时候呢，工具化当然是一劳永逸的方法，但是大部分时间下我们正在着急的完成新feature(改bug)，并没有时间来将数据查询工具化，那么此时，简单的给其一个excel就是一种良好的替代方法，excel也可以较为清晰的展(TA)示(men)数(xi)据(huan)。
```mysql
mysql -u 数据库用户名 -p -e "查询语句" 数据库名>导出路径及文件名
//example
mysql -u huyanshi -p - e "select * from mytable" mydb>~/Desktop/result.xls
```
#### 从sql文件导入
1.进入mysql命令行，创建数据库，使用数据库后执行source
```
mysql -u 数据库用户名 -p
输入密码
use mydb
source 文件路径及文件名
```

#### 从xls文件导入

如果有这个需求的话，我建议写一个脚本进行导入，因为可以在脚本中保证数据的正确性，防止后续对数据进行处理时出现各种意外情况，同时，个人在遇到此需求时也都是使用脚本进行导入，对简单的命令没有研究，因此不做介绍。后续如果碰到新的需求可能会将脚本贴在这里。



<br>
<br>
<br>
<br>
<h4>ChangeLog</h4>
2018-09-02      添加基础语句
2018-09-04      添加数据库的导入导出
<br>
<br>

**以上皆为个人所思所得，如有错误欢迎评论区指正。**

**欢迎转载，烦请署名并保留原文链接。**

**联系邮箱：huyanshi2580@gmail.com**

**更多学习笔记见个人博客------><a href="{{ site.baseurl }}/">呼延十</a>**
